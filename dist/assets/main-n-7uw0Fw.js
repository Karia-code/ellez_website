import"./style-_FeZC0s8.js";/* empty css                 */import{initializeApp as p}from"https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";import{getAuth as m,signInWithCustomToken as f,signInAnonymously as h,onAuthStateChanged as y}from"https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";import{getFirestore as g,collection as v,getDocs as r,setDoc as w,doc as b}from"https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";const _=JSON.parse(localStorage.getItem("firebase_config_override")||"null")||JSON.parse(__firebase_config),d=typeof __app_id<"u"?__app_id:"default-app-id",c=p(_),s=m(c),l=g(c);async function E(){try{typeof __initial_auth_token<"u"&&__initial_auth_token?await f(s,__initial_auth_token):await h(s)}catch(e){console.error("Authentication failed:",e)}y(s,async e=>{e&&await L()})}async function L(){const e=document.getElementById("dynamic-updates-list");e.innerHTML='<div class="loading-text">Loading updates...</div>';try{const t=v(l,"artifacts",d,"public","data","announcements"),n=await r(t);let a=[];n.empty?(await I(t),(await r(t)).forEach(i=>a.push({id:i.id,...i.data()}))):n.forEach(o=>a.push({id:o.id,...o.data()})),a.sort((o,i)=>new Date(i.date)-new Date(o.date)),S(a)}catch(t){console.error("Error loading updates:",t),e.innerHTML='<div class="error-text">Unable to load updates at this time.</div>'}}async function I(e){console.log("Seeding initial data...");const t=[{date:"2025.12.12",title:"Stall POS Official Launch",summary:"Released version 1.0 on the App Store. Now available for iPad with offline capabilities.",content:"<p>We are thrilled to announce the official launch of Stall POS version 1.0.</p><p>Designed specifically for creators and market vendors, this update brings robust offline capabilities, ensuring you never miss a sale even without internet connection.</p><h3>Key Features:</h3><ul><li>Offline-first architecture</li><li>Inventory management</li><li>Sales analytics</li></ul>"},{date:"2025.11.30",title:"What to Eat v2.2 Update",summary:'Major update including new "Food Diary" feature and improved location services.',content:'<p>The latest version of "What to Eat" is here. We listened to your feedback and introduced the highly requested Food Diary feature.</p><p>Now you can track your favorite discoveries and share them with friends.</p>'},{date:"2025.10.15",title:"ELLEZ Brand Refresh",summary:'Unveiling our new identity focused on "Technology Meets Emotion".',content:"<p>Today marks a new chapter for ELLEZ. We have refreshed our brand identity to better reflect our core mission: bridging the gap between cold technology and warm human emotion.</p><p>Our new logo and design system embrace minimalism and clarity.</p>"}];for(const n of t){const a="announce_"+Date.now()+Math.random().toString(36).substr(2,5);await w(b(l,"artifacts",d,"public","data","announcements",a),n)}}function S(e){const t=document.getElementById("dynamic-updates-list");t.innerHTML="",e.forEach(n=>{const a=document.createElement("div");a.className="update-item fade-in-section",a.onclick=()=>openAnnouncement(n),a.innerHTML=`
          <span class="update-date">${n.date}</span>
          <div class="update-content-preview">
            <h3>${n.title}</h3>
            <p>${n.summary}</p>
          </div>
          <span class="material-icons arrow-icon">arrow_forward</span>
        `,t.appendChild(a)}),u()}window.openAnnouncement=e=>{const t=document.getElementById("announcement-page");document.getElementById("page-title").textContent=e.title,document.getElementById("page-date").textContent=e.date,document.getElementById("page-body").innerHTML=e.content||e.summary,t.classList.add("active"),document.body.style.overflow="hidden"};window.closeAnnouncement=()=>{document.getElementById("announcement-page").classList.remove("active"),document.body.style.overflow=""};function u(){const e=new IntersectionObserver(t=>{t.forEach(n=>{n.isIntersecting&&(n.target.classList.add("visible"),n.target.classList.add("is-visible"))})},{threshold:.1});document.querySelectorAll(".fade-in-section").forEach(t=>e.observe(t))}E();document.addEventListener("DOMContentLoaded",u);
